
/**** . Create Client for User ****/
// Send
{'path': 'create_client'}
// Receive
{
    'path': 'create_client',
    'token': '{hex-str-token}'
}


/**** . User online ****/
// Send
{
    'path': 'online',
    'token': '{hex-str-token}'
}
// Receive
{
    'path': 'online',
    'user': {'id': '{user.id}', 'name': '{name}'}
}


/**** . User offline. :HOLD: ****/
// Send
{'path': 'offline'}
// Receive
{'path': 'offline'}



/**** . List global rooms  ****/
// Send
{'path': 'rooms'}
// Receive
{
    'path': 'rooms'
    'rooms': [{'oid': '{room.oid}', 'name': '{name}'}, '...']
}



/**** . Create a global room(admin only) ****/
// Send
{
    'path': 'create_room',
    'name': '{some-name}'
}
// Receive
{
    'path': 'create_room',
    'id': '{room.id}',
}


/**** . Destory a global room(admin only) ****/
// Send
{'path': 'destory_room', 'id': '{room.id}'}
// Send
{
    'path': 'destory_room',
    'id': '{room.id}',
}


/**** . List all users by room id ****/
// Send
{'path': 'members', 'id': '{room.id}'}
// Receive
{
    'path': 'members',
    'id': '{room.id}',
    'members': [{'oid': '0', 'name': 'user-0'}, '...']
}


/**** . Join a room ****/
// Send
{'path': 'join', 'id': '{room.id}'}
// Receive
{
    'path': 'join',
    'id': '{room.id}',
}


/**** . Leave a room ****/
// Send
{'path': 'leave', 'id': '{room.id}'}
// Receive
{
    'path': 'leave',
    'id': '{room.id}'
}



/**** . Get history of room/user ****/
// Send
{'path': 'history', 'type': '{room||user||visitor}', 'oid': '{rid||uid||vid}'}
// Send
{
    'path': 'history',
    'type': '{room||user||visitor}', // target_type
    'id': '{rid||uid||vid}',
    'messages': [{'from': '{user||visitor.oid}', 'body': '{body}', 'datetime': '{datetime}'}, '...']
}


/**** . Send message to room/user(mailbox)  ****/
// Send
{
    'path': 'message',
    'type': '{room||user||visitor}', // target_type
    'id': '{rid||uid||vid}',         // target_id(to)
    'body': '{message.body}'
}
// Receive, No
// Then receive from channel
{
    'path': 'message',
    'type': '{room||user||visitor}', // target_type
    'from': '{rid||uid||vid}',       // target_id(from)
    'body': '{message.body}',
    'status': 'ok||timeout||...'
}


/**** . Send typing notification to room/user(mailbox)  ****/
// Send
{
    'path': 'typing',
    'type': '{room||user||visitor}', // target_type
    'id': '{rid||uid||vid}',         // target_id
    'typing': '{True||False}'
}
// Receive, No
